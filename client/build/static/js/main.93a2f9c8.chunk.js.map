{"version":3,"sources":["App.js","index.js"],"names":["App","useState","userData","setUserData","renderCounter","setRenderCounter","authView","setAuthView","email","setEmail","password","setPassword","regName","setRegName","regEmail","setRegEmail","regPassword","setRegPassword","taskTitle","setTaskTitle","taskDesc","setTaskDesc","useEffect","string","getId","token","axios","get","headers","then","res","id","data","_id","console","log","catch","error","className","onClick","onChange","e","target","value","placeholder","name","preventDefault","details","post","response","payload","charAt","toUpperCase","slice","length","newUserData","taskData","Math","floor","random","taskList","push","put","err","addTask","map","task","userId","taskId","removeIndex","item","indexOf","splice","removeTask","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qOAsLeA,MAlLf,WAAgB,IAAD,EACmBC,mBAAS,IAD5B,mBACNC,EADM,KACIC,EADJ,OAE6BF,mBAAS,GAFtC,mBAENG,EAFM,KAESC,EAFT,OAGmBJ,mBAAS,IAH5B,mBAGNK,EAHM,KAGIC,EAHJ,OAKaN,mBAAS,IALtB,mBAKNO,EALM,KAKCC,EALD,OAMmBR,mBAAS,IAN5B,mBAMNS,EANM,KAMIC,EANJ,OAQiBV,mBAAS,IAR1B,mBAQNW,EARM,KAQGC,EARH,OASmBZ,mBAAS,IAT5B,mBASNa,EATM,KASIC,EATJ,OAUyBd,mBAAS,IAVlC,mBAUNe,EAVM,KAUOC,EAVP,OAYqBhB,mBAAS,IAZ9B,mBAYNiB,EAZM,KAYKC,EAZL,OAamBlB,mBAAS,IAb5B,mBAaNmB,EAbM,KAaIC,EAbJ,KAebC,qBAAU,cACP,CAACpB,IAEJ,IAgG+BqB,EAhFzBC,EAAQ,SAACC,GACbC,IAAMC,IAAI,cAAe,CACvBC,QAAS,CACP,aAAcH,KAGjBI,MAAK,SAACC,GAlBO,IAACC,IAmBLD,EAAIE,KAAKC,IAlBnBP,IAAMC,IAAI,eAAiBI,GAC1BF,MAAK,SAACC,GACLI,QAAQC,IAAIL,EAAIE,KAAK,IACrB7B,EAAY2B,EAAIE,KAAK,OAEtBI,OAAM,SAACC,GACNH,QAAQG,MAAM,OAASA,MAavBH,QAAQC,IAAIL,EAAIE,KAAKC,QAEtBG,OAAM,SAACC,GACNH,QAAQG,MAAM,SAAWA,OAyE7B,OACE,sBAAKC,UAAU,MAAf,UAEE,sBAAKA,UAAU,iBAAf,UACgB,aAAbhC,GAA2B,sBAAKgC,UAAU,gBAAf,UAC1B,wBAAQC,QAAS,kBAAMhC,EAAY,UAAnC,mBACc,eAAbD,GAA6B,wBAAQiC,QAAS,kBAAMhC,EAAY,aAAnC,sBACd,UAAdD,GAA2C,qBAAKgC,UAAU,kBAAf,SAC3C,uBAAMA,UAAU,aAAhB,UACE,uBAAOE,SAAU,SAACC,GAAD,OAAOhC,EAASgC,EAAEC,OAAOC,QAAQC,YAAY,WAAWC,KAAK,QAAQF,MAAOnC,IAC7F,uBAAOgC,SAAU,SAACC,GAAD,OAAO9B,EAAY8B,EAAEC,OAAOC,QAAQC,YAAY,cAAcC,KAAK,WAAWF,MAAOjC,IACtG,wBAAQ6B,QAhFN,SAACE,GACbA,EAAEK,iBACF,IAAMC,EAAU,CACdvC,MAAOA,EACPE,SAAUA,GAEZgB,IAAMsB,KAAK,kBAAmBD,GAC7BlB,MAAK,SAAUoB,GACdzB,EAAMyB,EAASrB,QAAQ,eACvBrB,EAAY,gBAuEJ,wBAIW,aAAbD,GAA4B,qBAAKgC,UAAU,qBAAf,SAC5B,uBAAMA,UAAU,aAAhB,UACE,uBAAOE,SAAU,SAACC,GAAD,OAAO5B,EAAW4B,EAAEC,OAAOC,QAAQC,YAAY,UAAUC,KAAK,OAAOF,MAAO/B,IAC7F,uBAAO4B,SAAU,SAACC,GAAD,OAAO1B,EAAY0B,EAAEC,OAAOC,QAAQC,YAAY,WAAWC,KAAK,QAAQF,MAAO7B,IAChG,uBAAO0B,SAAU,SAACC,GAAD,OAAOxB,EAAewB,EAAEC,OAAOC,QAAQC,YAAY,cAAcC,KAAK,WAAWF,MAAO3B,IACzG,wBAAQuB,QA5EH,SAACE,GAChBA,EAAEK,iBACF,IAAMI,EAAU,CACdL,KAAMjC,EACNJ,MAAOM,EACPJ,SAAUM,GAEZU,IAAMsB,KAAK,qBAAsBE,GAChCrB,MAAK,SAAUoB,GACd1C,EAAY,kBAmEJ,8BAIS,aAAbD,GAA4B,qBAAKgC,UAAU,qBAAf,SAC5B,0DAEa,eAAbhC,GAA8B,qBAAKgC,UAAU,uBAAf,SAC9B,yDAA2B,uBAA3B,yBAKJ,sBAAKA,UAAU,oBAAf,UACE,sBAAKA,UAAU,UAAf,UACE,2CACA,yCAAa,SAAUpC,GAxCAqB,EAwCkCrB,EAAS2C,KAvCjEtB,EAAO4B,OAAO,GAAGC,cAAgB7B,EAAO8B,MAAM,IAuC2B,yCAE1E,aAAcnD,GAAa,sBAAKoC,UAAU,UAAf,UAC3B,uBAAMA,UAAU,gBAAhB,UACE,uBAAOE,SAAU,SAACC,GAAD,OAAOtB,EAAasB,EAAEC,OAAOC,QAAQC,YAAY,UAAUC,KAAK,OAAOF,MAAOzB,IAC/F,uBAAOsB,SAAU,SAACC,GAAD,OAAOpB,EAAYoB,EAAEC,OAAOC,QAAQC,YAAY,UAAUC,KAAK,OAAOF,MAAOvB,IAC9F,wBAAQmB,QAAS,SAACE,GAAD,OArFX,SAACA,EAAGV,GAElB,GADAU,EAAEK,iBACE5B,EAAUoC,OAAS,EAAG,CAC1B,IAAMC,EAAcrD,EACdsD,EAAW,CACf,UAAatC,EACb,SAAYE,EACZ,GA/DKqC,KAAKC,MAAsB,IAAhBD,KAAKE,WAiErBJ,EAAYK,SAASC,KAAKL,GAC1BrD,EAAYoD,GACZ7B,IAAMoC,IAAI,oBAAqB5D,GAC9B2B,MAAK,SAACC,GACLI,QAAQC,IAAIL,EAAIE,MAChBb,EAAa,IACbE,EAAY,OAEbe,OAAM,SAAC2B,GACN7B,QAAQC,IAAI4B,OAmEkBC,CAAQvB,EAAGvC,EAAS+B,MAAMK,UAAU,SAA9D,yBAEF,qBAAKA,UAAU,iBAAf,SACGpC,EAAS0D,SAASK,KAAI,SAAAC,GAAI,OACzB,sBAAK5B,UAAU,OAAf,UACE,6BAAK4B,EAAKhD,YACV,4BAAIgD,EAAK9C,WACT,wBAAQmB,QAAS,kBArEZ,SAAC4B,EAAQC,GAC1B,IAAMb,EAAcrD,EAChBmE,EAAcd,EAAYK,SAASK,KAAI,SAASK,GAAQ,OAAOA,EAAKvC,MAAOwC,QAAQH,GACvFb,EAAYK,SAASY,OAAOH,EAAa,GACzClE,EAAYoD,GACZ7B,IAAMoC,IAAI,wBAAyB5D,GAClC2B,MAAK,SAACC,GACLI,QAAQC,IAAIL,EAAIE,MAChB3B,EAAiBD,EAAgB,MAElCgC,OAAM,SAAC2B,GACN7B,QAAQC,IAAI4B,MA0DqBU,CAAWvE,EAAS+B,IAAKiC,EAAKnC,KAArD,sCCtKhB2C,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.93a2f9c8.chunk.js","sourcesContent":["import {useState, useEffect} from 'react';\nimport './App.css';\nimport axios from 'axios';\n\nfunction App() {\n  const [userData, setUserData] = useState({});\n  const [renderCounter, setRenderCounter] = useState(0);\n  const [authView, setAuthView] = useState('');\n  //login\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  //Register\n  const [regName, setRegName] = useState('');\n  const [regEmail, setRegEmail] = useState('');\n  const [regPassword, setRegPassword] = useState('');\n  //Add task\n  const [taskTitle, setTaskTitle] = useState('');\n  const [taskDesc, setTaskDesc] = useState('');\n\n  useEffect(() => {\n  }, [userData]);\n\n  const numGen = () => {\n    return Math.floor(Math.random() * 10000);\n  }\n\n  const getData = (id) => {\n    axios.get('./api/posts/' + id)\n    .then((res) => {\n      console.log(res.data[0]);\n      setUserData(res.data[0])\n    })\n    .catch((error) => {\n      console.error(\"meh \" + error)\n    })\n  }\n\n\n  const getId = (token) => {\n    axios.get('./api/posts', {\n      headers: {\n        'auth-token': token\n      }\n    })\n    .then((res) => {\n      getData(res.data._id);\n      console.log(res.data._id);\n    })\n    .catch((error) => {\n      console.error(\"Oh no \" + error)\n    })\n  }\n  //Login existing user - pass\n  const login = (e) => {\n    e.preventDefault();\n    const details = {\n      email: email,\n      password: password\n    }\n    axios.post('/api/user/login', details)\n    .then(function (response) {\n      getId(response.headers[\"auth-token\"]);\n      setAuthView('loggedIn');\n    })\n  }\n  //Register new user\n  const register = (e) => {\n    e.preventDefault();\n    const payload = {\n      name: regName,\n      email: regEmail,\n      password: regPassword\n    }\n    axios.post('/api/user/register', payload)\n    .then(function (response) {\n      setAuthView('registered');\n    })\n  }\n  //Add task to taskList object in user document\n  const addTask = (e, id) => {\n    e.preventDefault();\n    if (taskTitle.length > 0) {\n    const newUserData = userData;\n    const taskData = {\n      \"taskTitle\": taskTitle,\n      \"taskDesc\": taskDesc,\n      \"id\": numGen()\n    }\n      newUserData.taskList.push(taskData);\n      setUserData(newUserData);\n      axios.put(\"/api/posts/change\", userData)\n      .then((res) => {\n        console.log(res.data);\n        setTaskTitle('');\n        setTaskDesc('');\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    }\n  }\n  //Remove task from taskList\n  const removeTask = (userId, taskId) => {\n    const newUserData = userData;\n    var removeIndex = newUserData.taskList.map(function(item) { return item.id; }).indexOf(taskId);\n    newUserData.taskList.splice(removeIndex, 1);\n    setUserData(newUserData);\n    axios.put(\"/api/posts/removeTask\", userData)\n    .then((res) => {\n      console.log(res.data);\n      setRenderCounter(renderCounter + 1);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }\n\n  //Other functions\n  const capitalizeFirstLetter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  return (\n    <div className=\"app\">\n      {/* LOGIN */}\n      <div className=\"auth-container\">\n        {authView !== 'loggedIn' && <div className=\"auth-selector\">\n          <button onClick={() => setAuthView('login')}>Login</button>\n          {authView !== 'registered' && <button onClick={() => setAuthView('register')}>Register</button>}\n          {(authView === ('login' || 'registered')) && <div className=\"login-container\">\n            <form className=\"input-main\">\n              <input onChange={(e) => setEmail(e.target.value)} placeholder=\"email...\" name=\"email\" value={email}></input>\n              <input onChange={(e) => setPassword(e.target.value)} placeholder=\"password...\" name=\"password\" value={password}></input>\n              <button onClick={login}>Login</button>\n            </form>\n          </div>}\n          {/* REGISTER */}\n          {(authView === 'register') && <div className=\"register-container\">\n            <form className=\"input-main\">\n              <input onChange={(e) => setRegName(e.target.value)} placeholder=\"name...\" name=\"name\" value={regName}></input>\n              <input onChange={(e) => setRegEmail(e.target.value)} placeholder=\"email...\" name=\"email\" value={regEmail}></input>\n              <input onChange={(e) => setRegPassword(e.target.value)} placeholder=\"password...\" name=\"password\" value={regPassword}></input>\n              <button onClick={register}>Register</button>\n            </form>\n          </div>}\n        </div>}\n        {(authView === 'loggedIn') && <div className=\"loggedIn-container\">\n          <p>Successfully logged in.</p>\n        </div>}\n        {(authView === 'registered') && <div className=\"registered-container\">\n          <p>Successfully registered.<br/>Please log in.</p>\n        </div>}\n      </div>\n      \n      {/* CONTENT */}\n      <div className=\"content-container\">\n        <div className=\"heading\">\n          <h1>Task List</h1>\n          <p>Welcome {('name' in userData) ? capitalizeFirstLetter(userData.name) : 'Guest. Please login or register.'}</p>\n        </div>\n        {('taskList' in userData) && <div className=\"content\">\n          <form className=\"add-task-main\">\n            <input onChange={(e) => setTaskTitle(e.target.value)} placeholder=\"task...\" name=\"task\" value={taskTitle}></input>\n            <input onChange={(e) => setTaskDesc(e.target.value)} placeholder=\"desc...\" name=\"desc\" value={taskDesc}></input>\n            <button onClick={(e, ) => addTask(e, userData._id)} className=\"button\">Add task</button>\n          </form>\n          <div className=\"task-container\">\n            {userData.taskList.map(task =>\n              <div className=\"task\">\n                <h3>{task.taskTitle}</h3>\n                <p>{task.taskDesc}</p>\n                <button onClick={() => removeTask(userData._id, task.id)}>Remove</button>\n              </div>\n            )}\n          </div>\n        </div>}\n        {/* <button onClick={toggleView}>View data</button> */}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}